<div class="company-wrapper">
  <div class="header">
    <div class="title">
      <div class="btn btn-light" (click)="navigateToCompanies()">
        <i class="bi bi-arrow-left-short"></i>
      </div>
    </div>
  </div>

  <div class="company-details">
    <form [formGroup]="companyForm" (ngSubmit)="onSubmit()">
      <div class="text-secondary fw-bold fs-6 text-uppercase form-header">
        <span>{{ companyId !== "create" ? "Update" : "Add new" }}</span> Company
      </div>

      <div class="input-section">
        <app-input
          label="Company Name"
          placeholder="Enter company name"
          type="text"
          [formControl]="getControl('company_name')"
        ></app-input>

        <app-input
          label="Company Address"
          placeholder="Enter company address"
          type="text"
          [formControl]="getControl('company_address')"
        ></app-input>

        <app-input
          label="GST Number"
          placeholder="Enter GST number"
          type="text"
          [formControl]="getControl('company_gst_no')"
        ></app-input>
      </div>

      <div class="btns">
        <button
          *ngIf="companyId !== 'create'"
          type="button"
          class="btn btn-danger"
          [disabled]="companyForm.invalid"
          data-bs-toggle="modal"
          data-bs-target="#deleteCompanyModal"
        >
          Delete Company
        </button>

        <button
          type="submit"
          class="btn btn-success"
          [disabled]="companyForm.invalid"
        >
          {{ companyId !== "create" ? "Update" : "Create" }} Company
        </button>
      </div>
    </form>
  </div>
</div>

<ng-container>
  <div
    class="modal fade"
    id="deleteCompanyModal"
    tabindex="-1"
    aria-labelledby="deleteCompanyModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <div class="header">
          <div
            class="modal-title d-flex gap-2 align-items-center justify-content-start px-3 fs-6 text-danger"
            id="deleteCompanyModalLabel"
          >
            Delete Company -
            <span class="fs-3 fw-bolder text-uppercase">
              {{ companyForm.get("company_name")?.value }}
            </span>
          </div>
        </div>

        <div class="modal-body">
          <div class="text-danger text-center mt-3 fw-bold">
            Are you sure you want to delete this company?
          </div>
        </div>

        <div
          class="footer d-flex align-items-center justify-content-center gap-2"
        >
          <button
            type="button"
            class="btn btn-secondary btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-danger btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            (click)="deleteCompany()"
            data-bs-dismiss="modal"
          >
            <i class="bi bi-trash3-fill"></i>
            Delete Company
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>
