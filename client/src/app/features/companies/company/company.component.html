<div class="company-wrapper">
  <div class="header">
    <div class="title">
      <div class="btn btn-light" (click)="navigateToCompanies()">
        <i class="bi bi-arrow-left-short"></i>
      </div>
    </div>
  </div>

  <ng-container *ngIf="companyId === 'create' || company; else noCompany">
    <div class="company-details">
      <form [formGroup]="companyForm">
        <div class="text-secondary fw-bold fs-6 text-uppercase form-header">
          <span>{{ companyId !== "create" ? "Update" : "Add new" }}</span>
          Company
        </div>

        <div class="input-section">
          <app-input
            label="Company Name"
            placeholder="Enter company name"
            type="text"
            [formControl]="getControl('company_name')"
          ></app-input>

          <app-input
            label="Company Address"
            placeholder="Enter company address"
            type="text"
            [formControl]="getControl('company_address')"
          ></app-input>

          <app-input
            label="GST Number"
            placeholder="Enter GST number"
            type="text"
            [formControl]="getControl('company_gst_no')"
          ></app-input>
        </div>

        <div class="btns">
          <button
            *ngIf="companyId !== 'create'"
            type="button"
            class="btn btn-danger"
            [disabled]="companyForm.invalid"
            data-bs-toggle="modal"
            data-bs-target="#deleteCompanyModal"
          >
            Delete Company
          </button>

          <button
            *ngIf="companyId !== 'create'"
            type="button"
            class="btn btn-success"
            [disabled]="companyForm.invalid"
            data-bs-toggle="modal"
            data-bs-target="#updateCompanyModal"
          >
            Update Company
          </button>

          <button
            *ngIf="companyId === 'create'"
            type="button"
            class="btn btn-success"
            [disabled]="companyForm.invalid"
            (click)="createCompany()"
          >
            Create Company
          </button>
        </div>
      </form>
    </div>
  </ng-container>
</div>

<ng-container>
  <div
    class="modal fade"
    id="deleteCompanyModal"
    tabindex="-1"
    aria-labelledby="deleteCompanyModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <div class="modal-body">
          <div class="text-danger text-center fw-bold">
            Are you sure you want to delete this company?
          </div>

          <div class="image">
            <img src="delete-content.jpg" type="image/*" alt="delete-details" />
          </div>
        </div>

        <div
          class="footer d-flex align-items-center justify-content-center gap-2"
        >
          <button
            type="button"
            class="btn btn-secondary btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-danger btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            (click)="deleteCompany()"
            data-bs-dismiss="modal"
          >
            <i class="bi bi-trash3-fill"></i>
            Delete Company
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<ng-container>
  <div
    class="modal fade"
    id="updateCompanyModal"
    tabindex="-1"
    aria-labelledby="updateCompanyModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <div class="modal-body">
          <div class="text-success text-center fw-bold">
            Are you sure you want to update the company details?
          </div>

          <div class="image">
            <img src="update-content.jpg" type="image/*" alt="update-details" />
          </div>
        </div>

        <div
          class="footer d-flex align-items-center justify-content-center gap-2"
        >
          <button
            type="button"
            class="btn btn-secondary btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-success btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            (click)="updateCompany()"
            data-bs-dismiss="modal"
          >
            Update Company
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #noCompany>
  <div class="loader-wrapper">
    <div class="spinner-border" role="status"></div>
  </div>
</ng-template>
