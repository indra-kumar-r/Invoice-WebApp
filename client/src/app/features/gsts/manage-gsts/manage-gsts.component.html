<div class="manage-gsts-wrapper">
  <div class="header">
    <div class="title">
      <div class="btn btn-light" (click)="navigateToHome()">
        <i class="bi bi-arrow-left-short"></i>
      </div>
      <div class="text-secondary fw-bold fs-6 text-uppercase">Gsts</div>
    </div>

    <div class="options">
      <div>
        <div
          class="btn btn-light btn-sm py-2 px-4 text-success fw-bolder d-flex gap-6"
          (click)="createGst()"
        >
          <i class="bi bi-plus"></i>
          <span>Create Gst</span>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="gsts.length; else noGsts" class="gsts-details">
    <div class="gsts-header">
      <div class="gsts-count">
        <div class="text-secondary fw-bold fs-6">GSTS: {{ gsts.length }}</div>
      </div>

      <div class="gsts-options">
        <div class="filter"></div>

        <div class="search"></div>
      </div>
    </div>

    <div class="gsts-list">
      <div class="gst" *ngFor="let gst of gsts">
        <div class="gst-details">
          <div class="gst-info-section fs-4 fw-bolder">
            {{ gst.month_name }}
            <span class="text-secondary fs-5">
              {{ gst.year }}
            </span>
          </div>

          <div class="text-success">
            Amount: <span class="fw-bold">{{ gst?.total?.toFixed(0) }} ₹</span>
          </div>
        </div>

        <div class="gst-options">
          <div
            class="btn btn-light d-flex btn-sm text-success fw-bolder"
            (click)="editGst(gst.uuid!)"
          >
            <i class="bi bi-box-arrow-in-up-right fs-5"></i>
          </div>

          <div
            class="btn btn-light d-flex btn-sm text-danger fw-bolder"
            data-bs-toggle="modal"
            data-bs-target="#deleteGstModal"
            (click)="selectGst(gst)"
          >
            <i class="bi bi-trash fs-5"></i>
          </div>

          <div
            class="btn btn-light d-flex btn-sm text-dark fw-bolder"
            (click)="viewGST(gst.uuid!)"
          >
            <i class="bi bi-printer fs-5"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noGsts>
    <div class="no-gsts">
      <div class="text-secondary fw-bold fs-6">
        No Gsts found, create Gsts to see them here!
      </div>

      <div
        class="btn btn-light btn-sm py-2 px-4 text-success fw-bolder d-flex gap-6"
        (click)="createGst()"
      >
        <i class="bi bi-plus"></i>
        <span>Create Gst</span>
      </div>
    </div>
  </ng-template>
</div>

<ng-container>
  <div
    class="modal fade"
    id="deleteGstModal"
    tabindex="-1"
    aria-labelledby="deleteGstModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <div class="header">
          <div
            class="modal-title d-flex gap-2 align-items-center justify-content-start px-3 fs-6 fw-bold text-danger"
            id="deleteGstModalLabel"
          >
            Delete GST
          </div>
        </div>

        <div class="modal-body">
          <div class="deleting-gst-details">
            <div class="gst-company text-secondary">
              Month: {{ selectedGst?.month_name }}
            </div>
            <div class="gst-date text-secondary">
              Year: {{ selectedGst?.year }}
            </div>
            <div
              *ngIf="selectedGst?.total"
              class="gst-amount text-secondary"
            >
              Amount: {{ selectedGst?.total?.toFixed(0) }} ₹
            </div>
          </div>

          <div class="text-danger text-center mt-3 fw-bold">
            Are you sure you want to delete this gst?
          </div>
        </div>

        <div
          class="footer d-flex align-items-center justify-content-center gap-2"
        >
          <button
            type="button"
            class="btn btn-secondary btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btn-danger btn-sm d-flex gap-2 py-2 px-4 text-light fw-bold"
            (click)="deleteGST(selectedGst?.uuid!)"
            data-bs-dismiss="modal"
          >
            <i class="bi bi-trash3-fill"></i>
            Delete GST
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-container>
