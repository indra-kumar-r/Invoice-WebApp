<div class="invoice-amount-details-wrapper">
  <div class="header">
    <div class="title">
      <div class="btn btn-light" (click)="navigateBack()">
        <i class="bi bi-arrow-left-short"></i>
      </div>
    </div>
  </div>

  <ng-container *ngIf="invoice; else noInvoice">
    <form [formGroup]="invoiceForm">
      <div class="text-secondary fw-bold fs-6 text-uppercase form-header">
        Amount Details for Invoice
      </div>

      <div class="invoice-amount-details" [formGroup]="invoiceForm">
        <div class="total-section">
          <div class="total-amount">
            <label>Total</label>
            <input
              type="number"
              formControlName="total"
              placeholder="Enter total"
            />
          </div>
        </div>

        <div class="tax-section">
          <div class="tax-item">
            <div class="tax-checkbox" (click)="toggleCheckbox('sgst')">
              <i
                [class]="
                  invoiceForm.get('include_sgst')?.value
                    ? 'bi bi-check-square-fill text-success'
                    : 'bi bi-square'
                "
              ></i>
            </div>
            <label for="sgstCheck">SGST</label>

            <ng-container *ngIf="invoiceForm.get('include_sgst')?.value">
              <input
                class="tax-rate"
                type="number"
                formControlName="sgst_rate"
                (input)="onTaxToggle()"
                placeholder="SGST %"
              />
            </ng-container>

            <ng-container *ngIf="invoiceForm.get('include_sgst')?.value">
              <input
                class="tax-value"
                type="number"
                formControlName="sgst"
                placeholder="SGST Value"
              />
            </ng-container>
          </div>

          <div class="tax-item">
            <div class="tax-checkbox" (click)="toggleCheckbox('cgst')">
              <i
                [class]="
                  invoiceForm.get('include_cgst')?.value
                    ? 'bi bi-check-square-fill text-success'
                    : 'bi bi-square'
                "
              ></i>
            </div>
            <label for="cgstCheck">CGST</label>

            <ng-container *ngIf="invoiceForm.get('include_cgst')?.value">
              <input
                class="tax-rate"
                type="number"
                formControlName="cgst_rate"
                (input)="onTaxToggle()"
                placeholder="CGST %"
              />
            </ng-container>

            <ng-container *ngIf="invoiceForm.get('include_cgst')?.value">
              <input
                class="tax-value"
                type="number"
                formControlName="cgst"
                placeholder="CGST Value"
              />
            </ng-container>
          </div>

          <div class="tax-item">
            <div class="tax-checkbox" (click)="toggleCheckbox('igst')">
              <i
                [class]="
                  invoiceForm.get('include_igst')?.value
                    ? 'bi bi-check-square-fill text-success'
                    : 'bi bi-square'
                "
              ></i>
            </div>
            <label for="igstCheck">IGST</label>

            <ng-container *ngIf="invoiceForm.get('include_igst')?.value">
              <input
                class="tax-rate"
                type="number"
                formControlName="igst_rate"
                (input)="onTaxToggle()"
                placeholder="IGST %"
              />
            </ng-container>

            <ng-container *ngIf="invoiceForm.get('include_igst')?.value">
              <input
                class="tax-value"
                type="number"
                formControlName="igst"
                placeholder="IGST Value"
              />
            </ng-container>
          </div>
        </div>

        <div class="grand-total-section">
          <div class="grand-total-amount">
            <label>Grand Total</label>
            <input
              type="number"
              formControlName="grand_total"
              placeholder="Enter grand total"
            />
          </div>

          <div class="amount-in-words">
            <label>Amount in Words</label>
            <input
              type="text"
              formControlName="amount_in_words"
              placeholder="Enter amount in words"
              class="text-uppercase"
            />
          </div>
        </div>
      </div>

      <div class="options mt-4">
        <button
          (click)="onSubmit()"
          type="button"
          class="btn btn-light text-success fw-bold"
        >
          Save Invoice
        </button>
      </div>
    </form>
  </ng-container>
</div>

<ng-template #noInvoice>
  <div class="loader-wrapper">
    <div class="spinner-border" role="status"></div>
  </div>
</ng-template>
